<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent Ease Study Dashboard</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'primary': '#4f46e5', // Indigo 600
                        'success': '#10b981', // Emerald 500
                        'warning': '#f59e0b', // Amber 500
                        'info': '#3b82f6',    // Blue 500
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        .progress-bar {
            transition: width 0.8s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen p-4 sm:p-8 flex items-start justify-center font-sans">

    <div id="app-container" class="w-full max-w-4xl bg-white shadow-xl rounded-xl p-6 space-y-8">
        <header class="text-center">
            <h1 class="text-3xl font-extrabold text-gray-800">Agent Ease Study Console</h1>
            <p class="mt-1 text-gray-500">Simulate and visualize key metrics affecting student interaction with the study agent.</p>
        </header>

        <!-- Input and Simulation Panel -->
        <div class="bg-indigo-50 p-6 rounded-lg shadow-inner border border-indigo-200">
            <h2 class="text-xl font-semibold text-indigo-800 mb-4">Simulation Inputs (Mock Data)</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                
                <div class="space-y-2">
                    <label for="clarity" class="block text-sm font-medium text-gray-700">Instruction Clarity (0-100)</label>
                    <input type="range" id="clarity" min="50" max="100" value="85" class="w-full h-2 bg-indigo-200 rounded-lg appearance-none cursor-pointer range-lg">
                    <span id="clarity-value" class="block text-right text-indigo-600 font-bold">85</span>
                </div>

                <div class="space-y-2">
                    <label for="helpfulness" class="block text-sm font-medium text-gray-700">Perceived Helpfulness (0-5)</label>
                    <input type="range" id="helpfulness" min="2" max="5" step="0.1" value="4.2" class="w-full h-2 bg-indigo-200 rounded-lg appearance-none cursor-pointer range-lg">
                    <span id="helpfulness-value" class="block text-right text-indigo-600 font-bold">4.2</span>
                </div>

                <div class="space-y-2">
                    <label for="latency" class="block text-sm font-medium text-gray-700">Agent Latency (Response Time in ms, 200-2000)</label>
                    <input type="range" id="latency" min="200" max="2000" step="50" value="700" class="w-full h-2 bg-indigo-200 rounded-lg appearance-none cursor-pointer range-lg">
                    <span id="latency-value" class="block text-right text-indigo-600 font-bold">700 ms</span>
                </div>
            </div>
        </div>

        <!-- The "Thumbnail" Visualization Area -->
        <div class="flex flex-col md:flex-row gap-8 items-center pt-4">
            
            <!-- Agent Ease Index Scorecard (The main thumbnail) -->
            <div class="w-full md:w-1/3 p-6 bg-white border border-gray-200 rounded-xl shadow-lg hover:shadow-2xl transition duration-300">
                <div class="text-center space-y-2">
                    <div class="text-xs uppercase font-bold tracking-widest text-gray-500">Primary Metric</div>
                    <h3 class="text-2xl font-bold text-gray-800">Agent Ease Index (AEI)</h3>
                    
                    <div id="aei-score-container" class="relative inline-block w-48 h-48 sm:w-56 sm:h-56">
                        <!-- Simulated Radial Progress Bar -->
                        <svg class="w-full h-full transform -rotate-90">
                            <circle class="text-gray-200" stroke-width="8" stroke="currentColor" fill="transparent" r="80" cx="95" cy="95" />
                            <circle id="aei-circle" class="text-success progress-bar" stroke-width="8" stroke="currentColor" fill="transparent" r="80" cx="95" cy="95"
                                style="stroke-dasharray: 502.4; stroke-dashoffset: 502.4;">
                            </circle>
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span id="aei-value" class="text-5xl font-extrabold text-gray-800">75</span>
                        </div>
                    </div>
                    <p id="aei-summary" class="text-sm font-medium text-gray-600 pt-2">Overall perception of effort required by students.</p>
                </div>
            </div>

            <!-- Detailed Metrics & Interpretation -->
            <div class="w-full md:w-2/3 space-y-5">
                <h2 class="text-xl font-semibold text-gray-800 border-b pb-2">Contributing Factors</h2>

                <!-- Clarity -->
                <div>
                    <div class="flex justify-between mb-1 text-sm font-medium">
                        <span class="text-info">Instruction Clarity</span>
                        <span id="metric-clarity" class="text-info font-bold">85%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div id="bar-clarity" class="bg-info h-2.5 rounded-full progress-bar" style="width: 85%"></div>
                    </div>
                </div>

                <!-- Helpfulness -->
                <div>
                    <div class="flex justify-between mb-1 text-sm font-medium">
                        <span class="text-success">Perceived Helpfulness</span>
                        <span id="metric-helpfulness" class="text-success font-bold">4.2 / 5.0</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div id="bar-helpfulness" class="bg-success h-2.5 rounded-full progress-bar" style="width: 84%"></div>
                    </div>
                </div>

                <!-- Latency -->
                <div>
                    <div class="flex justify-between mb-1 text-sm font-medium">
                        <span class="text-warning">Agent Latency (Speed)</span>
                        <span id="metric-latency" class="text-warning font-bold">700 ms</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <!-- Lower latency is better (faster), so we inverse the metric for the bar visualization -->
                        <div id="bar-latency" class="bg-warning h-2.5 rounded-full progress-bar" style="width: 65%"></div>
                    </div>
                </div>
                
                <!-- Interpretation Box -->
                <div class="p-4 bg-gray-100 rounded-lg border border-gray-300 mt-6">
                    <p class="text-sm italic text-gray-600">
                        <span class="font-bold">Interpretation:</span> AEI is calculated by weighting Clarity (40%), Helpfulness (40%), and Latency (20%). A score above 80 is considered optimal for ease of use.
                    </p>
                </div>
            </div>

        </div>
    </div>

    <script type="text/javascript">
        // Helper function to update the radial progress bar
        function updateRadialProgress(elementId, score) {
            const circle = document.getElementById(elementId);
            const radius = 80;
            const circumference = 2 * Math.PI * radius;
            const offset = circumference - (score / 100) * circumference;

            circle.style.strokeDashoffset = offset;

            let colorClass;
            let color;
            if (score >= 80) {
                color = 'var(--tw-colors-success)';
                colorClass = 'text-success';
            } else if (score >= 60) {
                color = 'var(--tw-colors-warning)';
                colorClass = 'text-warning';
            } else {
                color = 'var(--tw-colors-primary)';
                colorClass = 'text-primary';
            }

            // Remove existing color classes and add the new one
            circle.classList.remove('text-success', 'text-warning', 'text-primary');
            circle.classList.add(colorClass);
            
            // Set summary text based on score
            const summaryElement = document.getElementById('aei-summary');
            if (score >= 80) {
                summaryElement.textContent = "Excellent Ease: High student satisfaction and minimal friction.";
            } else if (score >= 60) {
                summaryElement.textContent = "Good Ease: Generally positive, but improvements in speed or clarity are needed.";
            } else {
                summaryElement.textContent = "Moderate Ease: Potential friction points impacting student flow.";
            }
        }

        // Main calculation and update function
        function calculateAndDisplayAEI() {
            const clarityRaw = parseFloat(document.getElementById('clarity').value); // 50-100
            const helpfulnessRaw = parseFloat(document.getElementById('helpfulness').value); // 2-5
            const latencyRaw = parseFloat(document.getElementById('latency').value); // 200-2000 ms (Lower is better)

            // Normalize Metrics (Scale them all to 0-100 for weighted average)
            
            // 1. Clarity is already close (50-100), scale to 0-100
            const clarityNorm = clarityRaw; // Treat 50 as 0 and 100 as 100
            
            // 2. Helpfulness (Scale 2.0-5.0 to 0-100)
            const helpfulnessNorm = (helpfulnessRaw - 2) / (5 - 2) * 100;
            
            // 3. Latency (Scale 2000-200 ms to 0-100, inversely)
            // Fastest (200ms) = 100 score, Slowest (2000ms) = 0 score.
            const latencyMax = 2000;
            const latencyMin = 200;
            const latencyScore = Math.max(0, latencyMax - latencyRaw) / (latencyMax - latencyMin) * 100;

            // Apply Weights: Clarity (40%), Helpfulness (40%), Latency (20%)
            const weightClarity = 0.40;
            const weightHelpfulness = 0.40;
            const weightLatency = 0.20;

            const aei = (clarityNorm * weightClarity) + (helpfulnessNorm * weightHelpfulness) + (latencyScore * weightLatency);
            const aeiRounded = Math.round(aei);

            // --- Update UI Elements ---

            // AEI Score
            document.getElementById('aei-value').textContent = aeiRounded;
            updateRadialProgress('aei-circle', aeiRounded);

            // Individual Metric Values
            document.getElementById('clarity-value').textContent = clarityRaw;
            document.getElementById('metric-clarity').textContent = `${clarityRaw}%`;
            document.getElementById('bar-clarity').style.width = `${clarityRaw}%`;
            
            document.getElementById('helpfulness-value').textContent = helpfulnessRaw.toFixed(1);
            document.getElementById('metric-helpfulness').textContent = `${helpfulnessRaw.toFixed(1)} / 5.0`;
            document.getElementById('bar-helpfulness').style.width = `${helpfulnessRaw / 5 * 100}%`;
            
            document.getElementById('latency-value').textContent = `${latencyRaw} ms`;
            document.getElementById('metric-latency').textContent = `${latencyRaw} ms`;
            // Latency bar: Show the INVERSE of the latency score (higher bar means faster speed)
            document.getElementById('bar-latency').style.width = `${latencyScore}%`; 
        }

        // Attach event listeners to the range inputs
        document.getElementById('clarity').addEventListener('input', calculateAndDisplayAEI);
        document.getElementById('helpfulness').addEventListener('input', calculateAndDisplayAEI);
        document.getElementById('latency').addEventListener('input', calculateAndDisplayAEI);

        // Initial calculation on page load
        window.onload = function() {
            calculateAndDisplayAEI();
        };

    </script>
</body>
</html>
